require "rake/clean"
require_relative "../helper"

CLEAN << "temp"
LIBS = "-I../../core/lib -Idist/include/ruby"

file "temp" do
  mkdir "temp"
end 

namespace :test do
  desc "Test the Ruby reader"
  task :reader do 
    ruby "#{LIBS} reader_test.rb"
  end

  desc "Test the Ruby writer"
  task :writer do 
    ruby "#{LIBS} writer_test.rb"
  end

  desc "Test the whole Ruby library"
  task :ruby => %w[test:reader test:writer] do 
  end

  desc "Test the plugins's Ruby engine"
  task :engine do 
    ruby "#{LIBS} engine_test.rb"
  end
end

desc "Generate solutions for some fixed problems using this plugin"
task :generate => "temp" do
  generate_solutions File.dirname __FILE__
end

desc "Try running the solutions that were generated by rake generate"
task :run => "temp" do
  try_run_solutions File.dirname __FILE__
end
